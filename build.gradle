apply plugin: 'com.android.library'

android {
    compileSdkVersion 22
    buildToolsVersion '21.1.2'

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 22
    }

    publishNonDefault true

    lintOptions {
        abortOnError false
    }

    buildTypes {
        debug {
            buildConfigField "String", "CLIENT_ID", "\"" + getGHId(false) + "\""
            buildConfigField "String", "CLIENT_SECRET", "\"" + getGHSecret(false) + "\""
            buildConfigField "String", "CLIENT_CALLBACK", "\"" + getGHCallback(false) + "\""
        }
        release {
            buildConfigField "String", "CLIENT_ID", "\"" + getGHId(true) + "\""
            buildConfigField "String", "CLIENT_SECRET", "\"" + getGHSecret(true) + "\""
            buildConfigField "String", "CLIENT_CALLBACK", "\"" + getGHCallback(true) + "\""
        }
    }
}

def getGHId(pro) {
    if (pro) {
        println(hasProperty('GH_PRO_ID') ? GH_PRO_ID : System.getenv('GH_PRO_ID'))
        return hasProperty('GH_PRO_ID') ? GH_PRO_ID : System.getenv('GH_PRO_ID')
    } else {
        println(hasProperty('GH_DEV_ID') ? GH_DEV_ID : System.getenv('GH_DEV_ID'))
        return hasProperty('GH_DEV_ID') ? GH_DEV_ID : System.getenv('GH_DEV_ID')
    }
}

def getGHSecret(pro) {
    if (pro) {
        println(hasProperty('GH_PRO_SECRET') ? GH_PRO_SECRET : System.getenv('GH_PRO_SECRET'))
        return hasProperty('GH_PRO_SECRET') ? GH_PRO_SECRET : System.getenv('GH_PRO_SECRET')
    } else {
        println(hasProperty('GH_DEV_SECRET') ? GH_DEV_SECRET : System.getenv('GH_DEV_SECRET'))
        return hasProperty('GH_DEV_SECRET') ? GH_DEV_SECRET : System.getenv('GH_DEV_SECRET')
    }
}

def getGHCallback(pro) {
    if (pro) {
        println(hasProperty('GH_PRO_CALLBACK') ? GH_PRO_CALLBACK : System.getenv('GH_PRO_CALLBACK'))
        return hasProperty('GH_PRO_CALLBACK') ? GH_PRO_CALLBACK : System.getenv('GH_PRO_CALLBACK')
    } else {
        println(hasProperty('GH_DEV_CALLBACK') ? GH_DEV_CALLBACK : System.getenv('GH_DEV_CALLBACK'))
        return hasProperty('GH_DEV_CALLBACK') ? GH_DEV_CALLBACK : System.getenv('GH_DEV_CALLBACK')
    }
}

dependencies {

    compile 'com.android.support:support-annotations:21.0.3'

    compile 'net.danlew:android.joda:2.6.0'
    compile 'org.ocpsoft.prettytime:prettytime:3.2.4.Final'

    compile project(':sdks:BaseSDK')
}
